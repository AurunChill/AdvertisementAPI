# AdvertisementAPI

## Обзор проекта
Данный проект представляет собой API для управления объявлениями с использованием фреймворка FastAPI и базы данных PostgreSQL. Данные об объявлениях загружаются автоматически из файла .csv в БД при запуске приложения.

## Техническое задание
Ознакомиться с полным ТЗ можно тут (https://docs.google.com/document/d/1JUIjal-tVb_VMGw3xd_hJJZmxV9EVvH-1k2IMFh1A_g/edit?usp=sharing).

## Структура API

### Группа Auth
- POST /auth/login  
  Войти в систему (обратите внимание, что username – это почта, использованная при регистрации!)

- POST /auth/logout  
  Выйти из системы

- POST /auth/register  
  Зарегистрироваться в системе

- GET /auth/ask-verification  
  Запросить письмо с верификационной ссылкой

- GET /auth/verify-account  
  Верификация аккаунта

### Группа Advertisement
(Доступна после входа в систему и верификации аккаунта)
- GET /api/v1/advertisement  
  Получить все объявления

- GET /api/v1/advertisement/{advertisementid}**  
  Получить данные объявления по id

- POST /api/v1/advertisement  
  Создание объявления

- PUT /api/v1/advertisement
  Обновление полей модели объявления

- DELETE /api/v1/advertisement/{advertisementid}
  Удаление объявления по id

## Технологии
- Основной фреймворк: FastAPI
- ORM: SQLAlchemy
- База данных: PostgreSQL
- Тестирование: PyTest

## Регистрация и верификация
Регистрация осуществляется с помощью *JWT токена*. Для верификации аккаунта необходимо пройти по ссылке, отправленной на почту после регистрации. Этот функционал реализован с использованием Celery для выполнения задач в фоновом режиме.

## Админ-панель
В проекте присутствует админ-панель. Для входа необходимо использовать данные из .env файла: ```ADMIN_USERNAME``` и ```ADMIN_PASSWORD```.

## Установка
> Примечание: .env файл не передается в реальном проекте, однако для корректной работы и в учебных целях он доступен в каталоге файлов.

1. Убедитесь, что Docker установлен на вашей системе.
2. Запустите проект с помощью команды:
   
   ```docker-compose up --build```
   

## Доступные URL
- Документация API (http://localhost:8080/docs)
- Админ-панель (http://localhost:8080/admin)

## Запуск тестов
Для запуска тестов выполните команду ```pytest```, находясь в командной строке контейнера **app_advertisement_api**.